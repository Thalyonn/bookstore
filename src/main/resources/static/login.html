<!DOCTYPE html>
<html>
<head>
  <title>Login</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    .container { max-width: 300px; margin: auto; }
    input, button { display: block; margin: 0.5em 0; padding: 0.5em; width: 100%; }
    #message { margin-top: 1em; font-weight: bold; }
  </style>
</head>
<body>
<div class="container">
  <h2>Login</h2>
  <form id="loginForm" method="post" action="/login">
    <input type="text" name="username" placeholder="Username" required>
    <input type="password" name="password" placeholder="Password" required>
    <button type="submit">Login</button>
    <a href="register.html">or Register</a>
  </form>
  <div id="message"></div>
</div>

<script>
  //check and get form submission to redirect after login
  document.getElementById("loginForm").addEventListener("submit", function(event) {
    event.preventDefault();
    const formData = new FormData(this);

    fetch("/login", {
      method: "POST",
      body: formData,
      credentials: "include" //keep the session cookie
    }).then(response => {
      if (response.ok) {
        window.location.href = "/home.html";
      } else {
        document.getElementById("message").innerText = "Login failed!";
      }
    });
  });
</script>
</body>
</html>
